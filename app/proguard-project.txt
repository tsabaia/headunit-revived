# Add project specific ProGuard rules here.

# --- Protobuf Rules ---
-keep class com.google.protobuf.** { *; }
-dontwarn com.google.protobuf.**
-keepattributes Signature, InnerClasses, EnclosingMethod, *Annotation*

# --- Generated Proto Classes ---
# Keep all generated protocol buffer classes and their members
-keep class com.andrerinas.headunitrevived.aap.protocol.proto.** { *; }
-keep interface com.andrerinas.headunitrevived.aap.protocol.proto.** { *; }
-keep enum com.andrerinas.headunitrevived.aap.protocol.proto.** { *; }

# --- Reflection Targets ---
# Ensure these system classes are kept and their members are accessible via reflection
-keep class android.net.Network { *; }
-keep class android.net.wifi.WifiInfo { *; }

# --- AndroidX Navigation & Fragments ---
# Keep NavHostFragment and Navigation classes (referenced in XML)
-keep class androidx.navigation.** { *; }
-keep class androidx.fragment.app.FragmentContainerView { *; }

# Keep all fragments in the main package (referenced in nav_graph.xml)
-keep class com.andrerinas.headunitrevived.main.** { *; }
-keep class com.andrerinas.headunitrevived.main.settings.** { *; }

# --- App Logic ---
# Keep specific app classes if needed (e.g. accessed via JNI or reflection)
# -keep class com.andrerinas.headunitrevived.decoder.** { *; }

# --- JNI ---
-keep class com.andrerinas.headunitrevived.aap.AapSslNative { *; }

# --- Conscrypt Rules ---
-dontwarn org.conscrypt.**
-keep class org.conscrypt.Conscrypt { *; }
-keep class org.conscrypt.OpenSSLProvider { *; }
